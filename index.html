<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DC Weather</title>
<style>
body {
  margin:0;
  background:#f4f2ee;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100vh;
  color:#111;
}

.city {
  font-size:28px;
  letter-spacing:2px;
  margin-bottom:10px;
}

.temp {
  font-size:140px;
  font-weight:800;
  line-height:1;
}

.condition {
  font-size:36px;
  margin-top:10px;
  font-weight:600;
}

.hilo {
  font-size:24px;
  margin-top:20px;
  opacity:.8;
}

.updated {
  position:absolute;
  bottom:20px;
  font-size:14px;
  opacity:.6;
}
</style>
</head>
<body>

<div class="city">WASHINGTON, DC</div>
<div class="temp" id="temp">--째</div>
<div class="condition" id="cond">Loading</div>
<div class="hilo" id="hilo"></div>
<div class="updated" id="updated"></div>

<script>
async function loadWeather() {
  const url = "https://api.open-meteo.com/v1/forecast?latitude=38.9072&longitude=-77.0369&current=temperature_2m,weather_code&daily=temperature_2m_max,temperature_2m_min&temperature_unit=fahrenheit&timezone=America%2FNew_York";

  const res = await fetch(url);
  const data = await res.json();

  const temp = Math.round(data.current.temperature_2m);
  const high = Math.round(data.daily.temperature_2m_max[0]);
  const low = Math.round(data.daily.temperature_2m_min[0]);
  const code = data.current.weather_code;

  const map = {
    0:"CLEAR",
    1:"MOSTLY CLEAR",
    2:"PARTLY CLOUDY",
    3:"OVERCAST",
    45:"FOG",
    48:"FOG",
    51:"DRIZZLE",
    53:"DRIZZLE",
    55:"HEAVY DRIZZLE",
    61:"LIGHT RAIN",
    63:"RAIN",
    65:"HEAVY RAIN",
    71:"LIGHT SNOW",
    73:"SNOW",
    75:"HEAVY SNOW",
    80:"SHOWERS",
    81:"SHOWERS",
    82:"HEAVY SHOWERS",
    95:"THUNDERSTORM"
  };

  document.getElementById("temp").textContent = temp + "째";
  document.getElementById("cond").textContent = map[code] || "CONDITIONS";
  document.getElementById("hilo").textContent = "HIGH " + high + "째   LOW " + low + "째";
  document.getElementById("updated").textContent = "Updated " + new Date().toLocaleTimeString();
}

loadWeather();
setInterval(loadWeather, 30 * 60 * 1000); // 30 min refresh
</script>

</body>
</html>
