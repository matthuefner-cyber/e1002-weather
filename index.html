<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DC Weather</title>
<style>
  :root{
    --pad: 28px;
    --fg: #fff;
    --muted: rgba(255,255,255,.78);
  }

  html, body { height: 100%; }
  body{
    margin:0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    color: var(--fg);
    background: #000;
    overflow: hidden;
  }

  /* Background artwork in your repo */
  .bg{
    position:fixed; inset:0;
    background: url("./bg.jpg") center/cover no-repeat;
    transform: scale(1.03);
    filter: saturate(1.05) contrast(1.05);
  }

  /* Dark overlay for readability */
  .scrim{
    position:fixed; inset:0;
    background:
      radial-gradient(1200px 700px at 15% 20%, rgba(0,0,0,.25), rgba(0,0,0,.65)),
      linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.70));
  }

  .wrap{
    position:relative;
    height:100%;
    padding: var(--pad);
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    gap: 18px;
  }

  .top{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap: 16px;
  }

  .loc{
    font-size: 22px;
    letter-spacing: 2px;
    text-transform: uppercase;
    opacity: .95;
  }

  .updated{
    font-size: 14px;
    color: var(--muted);
    text-align:right;
    padding-top: 6px;
    white-space: nowrap;
  }

  .hero{
    display:flex;
    align-items:center;
    gap: 18px;
  }

  .hero .temp{
    font-size: 132px;
    font-weight: 900;
    line-height: 0.95;
    letter-spacing: -2px;
  }

  .hero .meta{
    display:flex;
    flex-direction:column;
    gap: 10px;
    padding-top: 8px;
  }

  .cond{
    font-size: 34px;
    font-weight: 800;
    letter-spacing: 1px;
    text-transform: uppercase;
  }

  .hilo{
    font-size: 20px;
    color: var(--muted);
    font-weight: 650;
    letter-spacing: 1px;
    text-transform: uppercase;
  }

  .icon{
    width: 78px;
    height: 78px;
    color: #fff;
    opacity: .95;
    flex: 0 0 auto;
  }

  /* 7-day grid */
  .grid{
    margin-top: 8px;
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 12px;
    align-items:stretch;
  }

  .day{
    border-radius: 16px;
    padding: 14px 12px;
    background: rgba(0,0,0,.28);
    box-shadow: 0 10px 24px rgba(0,0,0,.18);
    display:flex;
    flex-direction:column;
    align-items:center;
    gap: 10px;
  }

  .dow{
    font-size: 16px;
    font-weight: 750;
    opacity: .95;
    letter-spacing: 1px;
    text-transform: uppercase;
  }

  .miniIcon{
    width: 36px;
    height: 36px;
    color: #fff;
    opacity: .92;
  }

  .hi{
    font-size: 20px;
    font-weight: 900;
    line-height: 1;
  }

  .lo{
    font-size: 14px;
    color: var(--muted);
    font-weight: 700;
    letter-spacing: .5px;
  }

  .footerNote{
    margin-top:auto;
    font-size: 12px;
    color: rgba(255,255,255,.55);
    letter-spacing: .6px;
  }
</style>
</head>
<body>
  <div class="bg"></div>
  <div class="scrim"></div>

  <div class="wrap">
    <div class="top">
      <div class="loc">Washington, DC</div>
      <div class="updated" id="updated">Updating…</div>
    </div>

    <div class="hero">
      <div class="icon" id="heroIcon"></div>
      <div class="temp" id="temp">--°</div>
      <div class="meta">
        <div class="cond" id="cond">Loading</div>
        <div class="hilo" id="hilo"></div>
      </div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="footerNote">Open-Meteo (°F locked) · Refreshes every 30 minutes</div>
  </div>

<script>
  // Simple, high-contrast SVG icons using currentColor (white)
  function svg(type){
    const common = 'viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"';
    const sun = `<svg ${common}><circle cx="32" cy="32" r="12" stroke="currentColor" stroke-width="4"/>
      <path d="M32 6v10M32 48v10M6 32h10M48 32h10M13 13l7 7M44 44l7 7M51 13l-7 7M20 44l-7 7"
      stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>`;
    const cloud = `<svg ${common}><path d="M22 46h22a12 12 0 0 0 0-24 16 16 0 0 0-31 5A10 10 0 0 0 22 46Z"
      stroke="currentColor" stroke-width="4" stroke-linejoin="round"/></svg>`;
    const rain = `<svg ${common}><path d="M22 42h22a12 12 0 0 0 0-24 16 16 0 0 0-31 5A10 10 0 0 0 22 42Z"
      stroke="currentColor" stroke-width="4" stroke-linejoin="round"/>
      <path d="M24 48l-3 8M34 48l-3 8M44 48l-3 8" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>`;
    const snow = `<svg ${common}><path d="M22 42h22a12 12 0 0 0 0-24 16 16 0 0 0-31 5A10 10 0 0 0 22 42Z"
      stroke="currentColor" stroke-width="4" stroke-linejoin="round"/>
      <path d="M24 52h0M34 52h0M44 52h0" stroke="currentColor" stroke-width="8" stroke-linecap="round"/></svg>`;
    const bolt = `<svg ${common}><path d="M22 40h22a12 12 0 0 0 0-24 16 16 0 0 0-31 5A10 10 0 0 0 22 40Z"
      stroke="currentColor" stroke-width="4" stroke-linejoin="round"/>
      <path d="M30 42l-6 12h8l-2 10 10-16h-8l2-6Z" fill="currentColor"/></svg>`;
    const fog = `<svg ${common}><path d="M14 24h36M10 32h44M14 40h36" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>`;
    const partly = `<svg ${common}>
      <circle cx="24" cy="24" r="10" stroke="currentColor" stroke-width="4"/>
      <path d="M24 6v6M6 24h6M11 11l4 4M37 11l-4 4" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
      <path d="M26 46h18a10 10 0 0 0 0-20 14 14 0 0 0-14 12A8 8 0 0 0 26 46Z"
        stroke="currentColor" stroke-width="4" stroke-linejoin="round"/>
    </svg>`;

    switch(type){
      case "sun": return sun;
      case "partly": return partly;
      case "cloud": return cloud;
      case "rain": return rain;
      case "snow": return snow;
      case "storm": return bolt;
      case "fog": return fog;
      default: return cloud;
    }
  }

  // Map Open-Meteo weather codes to icon + label
  function mapCode(code){
    // https://open-meteo.com/en/docs (weathercode)
    if (code === 0) return { icon:"sun", label:"CLEAR" };
    if ([1,2].includes(code)) return { icon:"partly", label:"PARTLY CLOUDY" };
    if (code === 3) return { icon:"cloud", label:"OVERCAST" };
    if ([45,48].includes(code)) return { icon:"fog", label:"FOG" };

    if ([51,53,55,56,57].includes(code)) return { icon:"rain", label:"DRIZZLE" };
    if ([61,63,65,66,67,80,81,82].includes(code)) return { icon:"rain", label:"RAIN" };

    if ([71,73,75,77,85,86].includes(code)) return { icon:"snow", label:"SNOW" };

    if ([95,96,99].includes(code)) return { icon:"storm", label:"STORM" };

    return { icon:"cloud", label:"CONDITIONS" };
  }

  function dow(ts){
    return new Date(ts).toLocaleDateString(undefined, { weekday: "short" }).toUpperCase();
  }

  async function loadWeather(){
    // DC coords + Fahrenheit forced + timezone locked
    const url =
      "https://api.open-meteo.com/v1/forecast" +
      "?latitude=38.9072&longitude=-77.0369" +
      "&current=temperature_2m,weather_code" +
      "&daily=weather_code,temperature_2m_max,temperature_2m_min,time" +
      "&temperature_unit=fahrenheit" +
      "&timezone=America%2FNew_York";

    const res = await fetch(url, { cache: "no-store" });
    const data = await res.json();

    const t = Math.round(data.current.temperature_2m);
    const code = data.current.weather_code;
    const m = mapCode(code);

    document.getElementById("temp").textContent = `${t}°`;
    document.getElementById("cond").textContent = m.label;
    document.getElementById("heroIcon").innerHTML = svg(m.icon);

    const hi = Math.round(data.daily.temperature_2m_max[0]);
    const lo = Math.round(data.daily.temperature_2m_min[0]);
    document.getElementById("hilo").textContent = `HIGH ${hi}°   LOW ${lo}°`;

    // Build 7-day grid
    const grid = document.getElementById("grid");
    grid.innerHTML = "";

    for (let i=0; i<7; i++){
      const dayCode = data.daily.weather_code[i];
      const hiD = Math.round(data.daily.temperature_2m_max[i]);
      const loD = Math.round(data.daily.temperature_2m_min[i]);
      const ts = data.daily.time[i] + "T12:00:00"; // safe midday parse

      const mm = mapCode(dayCode);

      const el = document.createElement("div");
      el.className = "day";
      el.innerHTML = `
        <div class="dow">${new Date(ts).toLocaleDateString(undefined, {weekday:"short"}).toUpperCase()}</div>
        <div class="miniIcon">${svg(mm.icon)}</div>
        <div class="hi">${hiD}°</div>
        <div class="lo">${loD}°</div>
      `;
      grid.appendChild(el);
    }

    const now = new Date();
    document.getElementById("updated").textContent =
      `Updated ${now.toLocaleTimeString([], {hour:"numeric", minute:"2-digit"})}`;
  }

  loadWeather();
  setInterval(loadWeather, 30 * 60 * 1000); // 30 minutes
</script>
</body>
</html>
